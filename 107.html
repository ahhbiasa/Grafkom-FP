<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Scene with Triangular Table and Chair</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <script>
        // --- Set up Scene ---
        const scene = new THREE.Scene();

        // --- Add Axes Helper ---
        const axesHelper = new THREE.AxesHelper(5); // The parameter sets the length of the axes
        scene.add(axesHelper);

        // --- Set up Renderer ---
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0xadd8e6);  // Set background color to light blue
        document.body.appendChild(renderer.domElement);

        // --- Table Dimensions ---
        const legHeight = 2.5;

        // --- Create the Trapezium Table Top ---
        const shape = new THREE.Shape();
        shape.moveTo(0, 0);        // Start at one corner of the trapezium
        shape.lineTo(4, 0);        // Draw the bottom edge
        shape.lineTo(3, 3);        // Draw the right slanted edge
        shape.lineTo(1, 3);        // Draw the top edge
        shape.lineTo(0, 0);        // Draw the left slanted edge to close the shape

        const extrudeSettings = { depth: 0.2, bevelEnabled: false };
        const tabletopGeometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
        const tabletopMaterial = new THREE.MeshLambertMaterial({ color: 0xc2b280 });
        const tabletop = new THREE.Mesh(tabletopGeometry, tabletopMaterial);
        tabletop.position.set(-2, legHeight, -1.5); // Center the tabletop on the scene
        tabletop.rotation.x = Math.PI / 2;          // Rotate to lay flat
        scene.add(tabletop);

        // --- Create the Table Legs ---
        const legGeometry = new THREE.BoxGeometry(0.1, legHeight, 0.1);
        const legMaterial = new THREE.MeshLambertMaterial({ color: 0x333333 });

        // Position each leg at the corners of the trapezium tabletop
        const leg1 = new THREE.Mesh(legGeometry, legMaterial);
        leg1.position.set(-2, legHeight / 2, -1.5); // Bottom-left corner
        scene.add(leg1);

        const leg2 = leg1.clone();
        leg2.position.set(2, legHeight / 2, -1.5); // Bottom-right corner
        scene.add(leg2);

        const leg3 = leg1.clone();
        leg3.position.set(1, legHeight / 2, 1.5); // Top-right corner
        scene.add(leg3);

        const leg4 = leg1.clone();
        leg4.position.set(-1, legHeight / 2, 1.5); // Top-left corner
        scene.add(leg4);

        // --- Create Bars to Connect the Legs ---
        const barGeometry = new THREE.BoxGeometry(0.1, 0.1, 3.2); // Adjust the length as needed
        const barMaterial = new THREE.MeshLambertMaterial({ color: 0x333333 });
        
        const frontbarGeometry = new THREE.BoxGeometry(0.1, 0.1, 2); // Adjust the length as needed
        const frontbarMaterial = new THREE.MeshLambertMaterial({ color: 0x333333 });
        
        // Connect leg1 with leg4
        const bar1 = new THREE.Mesh(barGeometry, barMaterial);
        bar1.position.set(-1.5, 0.05, 0); // Adjust position to connect leg1 and leg4
        bar1.rotation.y = Math.PI / 10; // Rotate to align with the legs
        scene.add(bar1);

        // Connect leg4 with leg3
        const bar2 = new THREE.Mesh(frontbarGeometry, frontbarMaterial);
        bar2.position.set(0, 0.05, 1.5); // Adjust position to connect leg1 and leg4
        bar2.rotation.y = Math.PI / 2; // Rotate to align with the legs
        scene.add(bar2);

        // Connect leg3 with leg2
        const bar3 = new THREE.Mesh(barGeometry, barMaterial);
        bar3.position.set(1.5, 0.05, 0); // Adjust position to connect leg1 and leg4
        bar3.rotation.y = Math.PI / -10; // Rotate to align with the legs
        scene.add(bar3);

        // --- Create the Chair ---
        const seatWidth = 1.5;
        const seatHeight = 0.2;
        const seatDepth = 1.5;

        const seatGeometry = new THREE.BoxGeometry(seatWidth, seatHeight, seatDepth);
        const seatMaterial = new THREE.MeshLambertMaterial({ color: 0x555555 });
        const seat = new THREE.Mesh(seatGeometry, seatMaterial);
        seat.position.set(0, 1.5, -3); // Position chair next to the table
        scene.add(seat);

        // --- Add a Plane (Floor) ---
        const planeGeometry = new THREE.PlaneGeometry(20, 20);
        const planeMaterial = new THREE.MeshLambertMaterial({ color: 0xcdfac7d });
        const plane = new THREE.Mesh(planeGeometry, planeMaterial);
        plane.rotation.x = -Math.PI / 2;  // Rotate plane to be horizontal
        plane.position.y = 0;  // Position plane at y = 0
        scene.add(plane);

        // --- Add Lights ---
        const ambientLight = new THREE.AmbientLight(0x404040, 2);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(5, 10, 7.5);
        scene.add(directionalLight);

        // --- Create the Camera ---
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 10;
        camera.position.y = 5;
        camera.lookAt(0, 0, 0);

        // --- Set up OrbitControls ---
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;  // Enable damping for smoother rotation
        controls.dampingFactor = 0.1;
        controls.minDistance = 5;  // Minimum zoom distance
        controls.maxDistance = 20; // Maximum zoom distance

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update();  // Update the controls in each frame
            renderer.render(scene, camera);
        }
        animate();

        // --- Handle Window Resize ---
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>
</html>
